<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KatMovie Hub - Free Movie Downloads</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="KatMovie Hub provides latest Hindi dubbed Hollywood movies with dual audio options. Watch trailers and official content in 480p, 720p, 1080p quality.">
    <meta name="keywords" content="katmovie hub, hindi dubbed movies, dual audio movies, hollywood hindi dubbed, latest movies 2025, movie trailers hindi">
    <meta name="robots" content="index, follow">
    <meta name="author" content="KatMovie Hub">
    <meta name="language" content="en">
    
    <meta property="og:title" content="KatMovie Hub - Latest Hindi Dubbed Movies">
    <meta property="og:description" content="Watch latest Hollywood movies in Hindi dubbed and dual audio. Official trailers and updates.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://realknowledge39.github.io/Katmoviesworlds/">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/ff0000/ffffff?text=KatMovie+Hub">
    <meta property="og:site_name" content="KatMovie Hub">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KatMovie Hub - Latest Hindi Dubbed Movies">
    <meta name="twitter:description" content="Latest Hollywood movies in Hindi dubbed and dual audio. Official content and trailers.">
    <meta name="twitter:image" content="https://via.placeholder.com/1200x630/ff0000/ffffff?text=KatMovie+Hub">

    <link rel="canonical" href="https://realknowledge39.github.io/Katmoviesworlds/">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'Arial', sans-serif; margin: 0; padding: 0; }
        .header { background: linear-gradient(#000, #1a1a1a); padding: 15px; text-align: center; border-bottom: 3px solid #ff0000; }
        .header h1 { font-size: 1.8rem; margin: 0; }
        .header p { font-size: 0.95rem; margin: 8px 0; }
        .search-bar { max-width: 90%; margin: 15px auto; }
        .search-bar input { border-radius: 30px; padding: 12px 20px; font-size: 1rem; }
        .nav-bar { background: #1a1a1a; padding: 12px; text-align: center; }
        .nav-bar a { color: #fff; margin: 0 12px; text-decoration: none; font-size: 1.1rem; }
        .nav-bar a:hover { color: #ff0000; }
        .trailer { margin: 20px 10px; position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; box-shadow: 0 4px 15px rgba(255,0,0,0.3); }
        .trailer iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        .main-content { padding: 15px; }
        .main-content h2 { text-align: center; margin-bottom: 25px; font-size: 1.7rem; }

        /* 2 columns grid */
        .movie-grid { 
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 18px;
            padding: 0 10px;
        }

        .movie-card { 
            background: #1e1e1e; 
            border-radius: 12px; 
            overflow: hidden; 
            transition: transform 0.3s ease, box-shadow 0.3s ease; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.6);
        }
        .movie-card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(255,0,0,0.5); }
        .movie-poster { width: 100%; height: 260px; object-fit: cover; }
        .movie-info { padding: 12px; }
        .movie-info h5 { font-size: 1rem; margin: 0 0 8px 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .movie-info p { font-size: 0.85rem; margin: 5px 0; line-height: 1.4; }
        .rating { color: #ffd700; font-weight: bold; font-size: 1rem; }
        .show-detail, .share-btn { 
            width: 100%; 
            padding: 10px; 
            font-size: 0.9rem; 
            margin-top: 10px;
            border-radius: 8px;
        }

        /* Share Modal */
        .share-modal .modal-content { background: #1e1e1e; color: #fff; }
        .share-modal .modal-header, .share-modal .modal-footer { border-color: #333; }
        .share-options { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px 0; }
        .share-options a { 
            color: white; 
            text-decoration: none; 
            font-size: 1.3rem; 
            padding: 12px 24px; 
            border-radius: 10px; 
            transition: all 0.3s;
            min-width: 140px;
            text-align: center;
        }
        .share-options a:hover { opacity: 0.9; transform: scale(1.05); }
        .telegram { background: #0088cc; }
        .whatsapp { background: #25D366; }
        .instagram { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }

        .loading-spinner { text-align: center; padding: 40px; font-size: 1.2rem; color: #ff0000; }
        .loading-spinner.hidden { display: none; }

        .footer { background: #000; padding: 25px 15px; text-align: center; margin-top: 50px; color: #ccc; font-size: 0.95rem; }
        .visitor-counter { margin-top: 20px; font-size: 1.2rem; color: #ffd700; }
        .visitor-counter strong { display: block; margin-bottom: 10px; }

        @media (max-width: 576px) {
            .movie-poster { height: 220px; }
            .movie-info h5 { font-size: 0.95rem; }
            .share-options { flex-direction: column; }
            .share-options a { margin: 8px 0; }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1><a href="#" style="color: #fff; text-decoration: none;">KatMovie Hub</a></h1>
        <p>Latest HD Movies - Hindi Dubbed & Dual Audio Downloads (480p/720p/1080p)</p>
        <div class="search-bar">
            <input type="text" id="searchInput" class="form-control" placeholder="Search movies...">
        </div>
    </header>
 
    <nav class="nav-bar">
        <a href="#">Home</a> | <a href="#">All Movies</a>
    </nav>

    <div class="trailer">
        <iframe src="https://www.youtube.com/embed/lU46B_5Vel4?autoplay=1&mute=1&loop=1&playlist=lU46B_5Vel4&controls=0&rel=0&modestbranding=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
 
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 main-content">
                <h2>Latest Movies (Hindi Dubbed)</h2>
                <div id="movieGrid" class="movie-grid"></div>
                <div id="loadingSpinner" class="loading-spinner hidden">Loading more movies...</div>
             
                <!-- Movie Detail Modal -->
                <div class="modal fade" id="movieModal" tabindex="-1">
                    <div class="modal-dialog modal-xl modal-dialog-centered">
                        <div class="modal-content bg-dark text-white">
                            <div class="modal-header border-secondary">
                                <h5 class="modal-title" id="movieModalLabel">Movie Details</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body" id="modalContent"></div>
                            <div class="modal-footer border-secondary">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Share Modal -->
                <div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content bg-dark text-white">
                            <div class="modal-header border-secondary">
                                <h5 class="modal-title" id="shareModalLabel">Share this Movie</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body text-center">
                                <p id="sharePreview" class="mb-4"></p>
                                <div class="share-options">
                                    <a href="#" id="shareTelegram" class="telegram">Telegram</a>
                                    <a href="#" id="shareWhatsapp" class="whatsapp">WhatsApp</a>
                                    <a href="#" id="shareInstagram" class="instagram">Instagram</a>
                                </div>
                            </div>
                            <div class="modal-footer border-secondary">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
 
    <footer class="footer">
        <p>Â© 2025 KatMovie Hub â€¢ Latest Hindi Dubbed Movies</p>
        
        <div class="visitor-counter">
            <strong>Total Visitors:</strong>
            <div id="sfcqlbucnf32sxf5nquu5j6z63t953ytyzk"></div>
            <script type="text/javascript" src="https://counter1.optistats.ovh/private/counter.js?c=qlbucnf32sxf5nquu5j6z63t953ytyzk&down=async" async></script>
            <noscript><a href="https://www.freecounterstat.com" title="web counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=qlbucnf32sxf5nquu5j6z63t953ytyzk" border="0" alt="web counter"></a></noscript>
        </div>
    </footer>
 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script async src="https://www.instagram.com/embed.js"></script>
    <script>
        let currentPage = 1;
        let isLoading = false;
        let hasMore = true;
        const PER_PAGE = 100;
        const BASE_URL = 'https://public-api.wordpress.com/rest/v1/sites/katmoviehddotpk.wordpress.com/posts';

        let currentShareData = null;

        async function fetchPage(page) {
            try {
                const url = `${BASE_URL}?number=${PER_PAGE}&page=${page}`;
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network error');
                const data = await response.json();
                return data.posts || [];
            } catch (error) {
                console.error('API fetch failed:', error);
                return [];
            }
        }

        function renderGrid(posts) {
            const grid = document.getElementById('movieGrid');

            posts.forEach(post => {
                const year = new Date(post.date).getFullYear();
                const genres = post.categories ? Object.values(post.categories).map(cat => cat.name || cat.title || cat).join(', ') : 'Uncategorized';
                const synopsis = post.content ? post.content.replace(/<[^>]*>/g, '').substring(0, 100) + '...' : 'No description.';
                
                let posterUrl = 'https://via.placeholder.com/300x450/ff0000/ffffff?text=No+Image';
                const parser = new DOMParser();
                const doc = parser.parseFromString(post.content, 'text/html');
                const img = doc.querySelector('img');
                if (img && img.src) posterUrl = img.src;

                const card = document.createElement('div');
                card.className = 'movie-card';
                card.setAttribute('data-title', post.title.toLowerCase());
                card.innerHTML = `
                    <img src="${posterUrl}" alt="${post.title} Hindi Dubbed Poster" class="movie-poster" onerror="this.src='https://via.placeholder.com/300x450/ff0000/ffffff?text=No+Image'">
                    <div class="movie-info">
                        <h5>${post.title} (${year})</h5>
                        <p class="rating">â˜… 7.0</p>
                        <p><strong>${genres}</strong></p>
                        <p>${synopsis}</p>
                        <button type="button" class="btn btn-danger show-detail" onclick="showDetail(${post.ID}, event)">Watch / Download</button>
                        <button type="button" class="btn btn-success share-btn" onclick="openShareModal(${post.ID}, '${post.title.replace(/'/g, "\\'")}', '${posterUrl.replace(/'/g, "\\'")}', event)">Share</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        async function loadMoreMovies() {
            if (isLoading || !hasMore) return;
            isLoading = true;
            document.getElementById('loadingSpinner').classList.remove('hidden');

            const posts = await fetchPage(currentPage);
            if (posts.length === 0) {
                hasMore = false;
            } else {
                renderGrid(posts);
                currentPage++;
                if (posts.length < PER_PAGE) hasMore = false;
            }

            isLoading = false;
            document.getElementById('loadingSpinner').classList.add('hidden');
        }

        // Fixed: prevent scroll to top
        async function showDetail(postId, event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            try {
                const response = await fetch(`${BASE_URL}/${postId}`);
                const post = await response.json();
                const fullContent = post.content || '<p>No content available.</p>';

                let youtubeUrl = '';
                const patterns = [/youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/i, /youtu\.be\/([a-zA-Z0-9_-]{11})/i, /youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/i];
                for (const pattern of patterns) {
                    const match = fullContent.match(pattern);
                    if (match) {
                        youtubeUrl = `https://www.youtube.com/embed/${match[1]}?autoplay=1&mute=1&rel=0`;
                        break;
                    }
                }

                let videoSection = youtubeUrl ? `<div class="trailer my-3"><iframe src="${youtubeUrl}" allowfullscreen allow="autoplay"></iframe></div>` : '';

                const modifiedContent = fullContent.replace(/<a /g, '<a target="_blank" rel="noopener" ');

                document.getElementById('movieModalLabel').textContent = post.title;
                document.getElementById('modalContent').innerHTML = videoSection + modifiedContent;

                if (window.instgrm) instgrm.Embeds.process();

                const modal = new bootstrap.Modal(document.getElementById('movieModal'));
                modal.show();
            } catch (error) {
                alert('Failed to load movie details.');
            }
        }

        // Fixed: prevent scroll to top
        function openShareModal(postId, title, poster, event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            currentShareData = { postId, title, poster };

            document.getElementById('sharePreview').innerHTML = `
                <strong>${title}</strong><br>
                <img src="${poster}" alt="Poster" style="max-width:100%; height:auto; margin:10px 0; border-radius:8px;">
            `;

            const modal = new bootstrap.Modal(document.getElementById('shareModal'));
            modal.show();
        }

        async function shareTo(platform) {
            if (!currentShareData) return;

            const { postId, title, poster } = currentShareData;

            let linksText = '';
            try {
                const response = await fetch(`${BASE_URL}/${postId}`);
                const post = await response.json();
                const content = post.content || '';

                const qualityPatterns = [
                    {q: '480p', regex: /480p.*?href=["'](.*?)["']/i},
                    {q: '720p', regex: /720p.*?href=["'](.*?)["']/i},
                    {q: '1080p', regex: /1080p.*?href=["'](.*?)["']/i}
                ];

                qualityPatterns.forEach(pat => {
                    const match = content.match(pat.regex);
                    if (match && match[1]) {
                        linksText += `${pat.q}: ${match[1]}\n`;
                    }
                });

                if (!linksText) {
                    const allLinks = content.match(/https?:\/\/[^\s"']+/g) || [];
                    linksText = allLinks.join('\n');
                }
            } catch (e) {
                console.log('Could not parse quality links', e);
            }

            const shareText = `ðŸŽ¬ ${title}\n\nDownload Links:\n${linksText || 'Check full post for links'}\n\nPoster: ${poster}`;

            let url;
            if (platform === 'telegram') {
                url = `https://t.me/share/url?url=${encodeURIComponent(poster)}&text=${encodeURIComponent(shareText)}`;
            } else if (platform === 'whatsapp') {
                url = `whatsapp://send?text=${encodeURIComponent(shareText)}`;
            } else if (platform === 'instagram') {
                navigator.clipboard.writeText(shareText);
                alert(`Text copied!\n\nOpen Instagram â†’ Paste in Stories/Post.\nPoster: ${poster}`);
                return;
            }

            if (url) window.open(url, '_blank');
        }

        function searchMovies() {
            const input = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.movie-card');
            cards.forEach(card => {
                const title = card.querySelector('h5').textContent.toLowerCase();
                card.style.display = title.includes(input) ? 'block' : 'none';
            });
        }

        function handleScroll() {
            if (isLoading || !hasMore) return;

            const spinner = document.getElementById('loadingSpinner');
            const rect = spinner.getBoundingClientRect();
            if (rect.top < window.innerHeight + 200) {
                loadMoreMovies();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadMoreMovies();
            document.getElementById('searchInput').addEventListener('input', searchMovies);
            window.addEventListener('scroll', handleScroll);
            window.addEventListener('touchmove', handleScroll);

            document.getElementById('shareTelegram')?.addEventListener('click', e => { e.preventDefault(); shareTo('telegram'); });
            document.getElementById('shareWhatsapp')?.addEventListener('click', e => { e.preventDefault(); shareTo('whatsapp'); });
            document.getElementById('shareInstagram')?.addEventListener('click', e => { e.preventDefault(); shareTo('instagram'); });
        });
    </script>
</body>
</html>